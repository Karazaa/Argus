// Copyright Karazaa. This is a part of an RTS project called Argus.
// AUTOGENERATED FILE

#pragma once

#include "SoftPtrLoadStore.h"
#include "ArgusEntity.h"
#include "ArgusLogging.h"
#include "ArgusActor.h"
#include "ArgusEntityTemplate.h"
#include "Engine/Texture.h"
#include "Materials/MaterialInterface.h"

#pragma region Soft Objects

#pragma region UArgusEntityTemplate
	UArgusEntityTemplate* FSoftObjectLoadStore_UArgusEntityTemplate::LoadAndStorePtr() const
	{
		ARGUS_TRACE(FSoftPtrLoadStore_UArgusEntityTemplate::LoadAndStorePtr);

		if (m_hardPtr)
		{
			return m_hardPtr.Get();
		}

		if (m_softPtr.IsNull())
		{
			return nullptr;
		}

		m_hardPtr = m_softPtr.LoadSynchronous();
		return m_hardPtr.Get();
	}

	bool FSoftObjectLoadStore_UArgusEntityTemplate::AsyncPreLoadAndStorePtr(TFunction<void(UArgusEntityTemplate*)> callback) const
	{
		ARGUS_TRACE(FSoftPtrLoadStore_UArgusEntityTemplate::AsyncPreLoadAndStorePtr);

		if (m_softPtr.IsNull())
		{
			return false;
		}

		if (m_hardPtr)
		{
			if (callback)
			{
				callback(m_hardPtr);
			}
			return true;
		}

		AssetLoadingComponent* assetLoadingComponent = ArgusEntity::GetSingletonEntity().GetComponent<AssetLoadingComponent>();
		ARGUS_RETURN_ON_NULL_BOOL(assetLoadingComponent, ArgusStaticDataLog);

		assetLoadingComponent->m_streamableManager.RequestAsyncLoad(m_softPtr.ToSoftObjectPath(), FStreamableDelegate::CreateLambda
		(
			[this, callback]()
			{
				m_hardPtr = m_softPtr.Get();
				if (callback)
				{
					callback(m_hardPtr);
				}
			})
		);

		return true;
	}

	void FSoftObjectLoadStore_UArgusEntityTemplate::SetHardPtr(UArgusEntityTemplate* pointer)
	{
		m_hardPtr = pointer;
	};
#pragma endregion

#pragma region UTexture
	UTexture* FSoftObjectLoadStore_UTexture::LoadAndStorePtr() const
	{
		ARGUS_TRACE(FSoftPtrLoadStore_UTexture::LoadAndStorePtr);

		if (m_hardPtr)
		{
			return m_hardPtr.Get();
		}

		if (m_softPtr.IsNull())
		{
			return nullptr;
		}

		m_hardPtr = m_softPtr.LoadSynchronous();
		return m_hardPtr.Get();
	}

	bool FSoftObjectLoadStore_UTexture::AsyncPreLoadAndStorePtr(TFunction<void(UTexture*)> callback) const
	{
		ARGUS_TRACE(FSoftPtrLoadStore_UTexture::AsyncPreLoadAndStorePtr);

		if (m_softPtr.IsNull())
		{
			return false;
		}

		if (m_hardPtr)
		{
			if (callback)
			{
				callback(m_hardPtr);
			}
			return true;
		}

		AssetLoadingComponent* assetLoadingComponent = ArgusEntity::GetSingletonEntity().GetComponent<AssetLoadingComponent>();
		ARGUS_RETURN_ON_NULL_BOOL(assetLoadingComponent, ArgusStaticDataLog);

		assetLoadingComponent->m_streamableManager.RequestAsyncLoad(m_softPtr.ToSoftObjectPath(), FStreamableDelegate::CreateLambda
		(
			[this, callback]()
			{
				m_hardPtr = m_softPtr.Get();
				if (callback)
				{
					callback(m_hardPtr);
				}
			})
		);

		return true;
	}

	void FSoftObjectLoadStore_UTexture::SetHardPtr(UTexture* pointer)
	{
		m_hardPtr = pointer;
	};
#pragma endregion

#pragma region UMaterialInterface
	UMaterialInterface* FSoftObjectLoadStore_UMaterialInterface::LoadAndStorePtr() const
	{
		ARGUS_TRACE(FSoftPtrLoadStore_UMaterialInterface::LoadAndStorePtr);

		if (m_hardPtr)
		{
			return m_hardPtr.Get();
		}

		if (m_softPtr.IsNull())
		{
			return nullptr;
		}

		m_hardPtr = m_softPtr.LoadSynchronous();
		return m_hardPtr.Get();
	}

	bool FSoftObjectLoadStore_UMaterialInterface::AsyncPreLoadAndStorePtr(TFunction<void(UMaterialInterface*)> callback) const
	{
		ARGUS_TRACE(FSoftPtrLoadStore_UMaterialInterface::AsyncPreLoadAndStorePtr);

		if (m_softPtr.IsNull())
		{
			return false;
		}

		if (m_hardPtr)
		{
			if (callback)
			{
				callback(m_hardPtr);
			}
			return true;
		}

		AssetLoadingComponent* assetLoadingComponent = ArgusEntity::GetSingletonEntity().GetComponent<AssetLoadingComponent>();
		ARGUS_RETURN_ON_NULL_BOOL(assetLoadingComponent, ArgusStaticDataLog);

		assetLoadingComponent->m_streamableManager.RequestAsyncLoad(m_softPtr.ToSoftObjectPath(), FStreamableDelegate::CreateLambda
		(
			[this, callback]()
			{
				m_hardPtr = m_softPtr.Get();
				if (callback)
				{
					callback(m_hardPtr);
				}
			})
		);

		return true;
	}

	void FSoftObjectLoadStore_UMaterialInterface::SetHardPtr(UMaterialInterface* pointer)
	{
		m_hardPtr = pointer;
	};
#pragma endregion

#pragma endregion

#pragma region Soft Classes

#pragma region AArgusActor
	UClass* FSoftClassLoadStore_AArgusActor::LoadAndStorePtr() const
	{
		ARGUS_TRACE(FSoftClassLoadStore_AArgusActor::LoadAndStorePtr);

		if (m_hardPtr)
		{
			return m_hardPtr.Get();
		}

		if (m_softPtr.IsNull())
		{
			return nullptr;
		}

		m_hardPtr = m_softPtr.LoadSynchronous();
		return m_hardPtr.Get();
	}

	bool FSoftClassLoadStore_AArgusActor::AsyncPreLoadAndStorePtr(TFunction<void(UClass*)> callback) const
	{
		ARGUS_TRACE(FSoftClassLoadStore_AArgusActor::AsyncPreLoadAndStorePtr);

		if (m_softPtr.IsNull())
		{
			return false;
		}

		if (m_hardPtr)
		{
			if (callback)
			{
				callback(m_hardPtr);
			}
			return true;
		}

		AssetLoadingComponent* assetLoadingComponent = ArgusEntity::GetSingletonEntity().GetComponent<AssetLoadingComponent>();
		ARGUS_RETURN_ON_NULL_BOOL(assetLoadingComponent, ArgusStaticDataLog);

		assetLoadingComponent->m_streamableManager.RequestAsyncLoad(m_softPtr.ToSoftObjectPath(), FStreamableDelegate::CreateLambda
		(
			[this, callback]()
			{
				m_hardPtr = m_softPtr.Get();
				if (callback)
				{
					callback(m_hardPtr);
				}
			})
		);

		return true;
	}

	void FSoftClassLoadStore_AArgusActor::SetHardPtr(UClass* pointer)
	{
		m_hardPtr = pointer;
	};
#pragma endregion

#pragma endregion

// Copyright Karazaa. This is a part of an RTS project called Argus.
// AUTOGENERATED FILE

#include "ArgusComponentRegistry.h"
#include "ArgusEntity.h"
#include "ArgusMemorySource.h"

// Begin component specific definitions
#pragma region AbilityComponent
AbilityComponent* ArgusComponentRegistry::s_AbilityComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isAbilityComponentActive;
#pragma endregion
#pragma region ArgusDecalComponent
ArgusDecalComponent* ArgusComponentRegistry::s_ArgusDecalComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isArgusDecalComponentActive;
#pragma endregion
#pragma region AvoidanceGroupingComponent
AvoidanceGroupingComponent* ArgusComponentRegistry::s_AvoidanceGroupingComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isAvoidanceGroupingComponentActive;
#pragma endregion
#pragma region CarrierComponent
CarrierComponent* ArgusComponentRegistry::s_CarrierComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isCarrierComponentActive;
#pragma endregion
#pragma region CombatComponent
CombatComponent* ArgusComponentRegistry::s_CombatComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isCombatComponentActive;
#pragma endregion
#pragma region ConstructionComponent
ConstructionComponent* ArgusComponentRegistry::s_ConstructionComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isConstructionComponentActive;
#pragma endregion
#pragma region FlockingComponent
FlockingComponent* ArgusComponentRegistry::s_FlockingComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isFlockingComponentActive;
#pragma endregion
#pragma region FogOfWarLocationComponent
FogOfWarLocationComponent* ArgusComponentRegistry::s_FogOfWarLocationComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isFogOfWarLocationComponentActive;
#pragma endregion
#pragma region HealthComponent
HealthComponent* ArgusComponentRegistry::s_HealthComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isHealthComponentActive;
#pragma endregion
#pragma region IdentityComponent
IdentityComponent* ArgusComponentRegistry::s_IdentityComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isIdentityComponentActive;
#pragma endregion
#pragma region NavigationComponent
NavigationComponent* ArgusComponentRegistry::s_NavigationComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isNavigationComponentActive;
#pragma endregion
#pragma region NearbyEntitiesComponent
NearbyEntitiesComponent* ArgusComponentRegistry::s_NearbyEntitiesComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isNearbyEntitiesComponentActive;
#pragma endregion
#pragma region NearbyObstaclesComponent
NearbyObstaclesComponent* ArgusComponentRegistry::s_NearbyObstaclesComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isNearbyObstaclesComponentActive;
#pragma endregion
#pragma region ObserversComponent
ObserversComponent* ArgusComponentRegistry::s_ObserversComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isObserversComponentActive;
#pragma endregion
#pragma region PassengerComponent
PassengerComponent* ArgusComponentRegistry::s_PassengerComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isPassengerComponentActive;
#pragma endregion
#pragma region ResourceComponent
ResourceComponent* ArgusComponentRegistry::s_ResourceComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isResourceComponentActive;
#pragma endregion
#pragma region ResourceExtractionComponent
ResourceExtractionComponent* ArgusComponentRegistry::s_ResourceExtractionComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isResourceExtractionComponentActive;
#pragma endregion
#pragma region SpawningComponent
SpawningComponent* ArgusComponentRegistry::s_SpawningComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isSpawningComponentActive;
#pragma endregion
#pragma region TargetingComponent
TargetingComponent* ArgusComponentRegistry::s_TargetingComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isTargetingComponentActive;
#pragma endregion
#pragma region TaskComponent
TaskComponent* ArgusComponentRegistry::s_TaskComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isTaskComponentActive;
#pragma endregion
#pragma region TimerComponent
TimerComponent* ArgusComponentRegistry::s_TimerComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isTimerComponentActive;
#pragma endregion
#pragma region TransformComponent
TransformComponent* ArgusComponentRegistry::s_TransformComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isTransformComponentActive;
#pragma endregion
#pragma region VelocityComponent
VelocityComponent* ArgusComponentRegistry::s_VelocityComponents = nullptr;
TBitArray<ArgusContainerAllocator<ArgusECSConstants::k_numBitBuckets> > ArgusComponentRegistry::s_isVelocityComponentActive;
#pragma endregion
#pragma region AssetLoadingComponent
ArgusMap<uint16, AssetLoadingComponent*, ArgusSetAllocator<1> > ArgusComponentRegistry::s_AssetLoadingComponents;
#pragma endregion
#pragma region FogOfWarComponent
ArgusMap<uint16, FogOfWarComponent*, ArgusSetAllocator<1> > ArgusComponentRegistry::s_FogOfWarComponents;
#pragma endregion
#pragma region InputInterfaceComponent
ArgusMap<uint16, InputInterfaceComponent*, ArgusSetAllocator<1> > ArgusComponentRegistry::s_InputInterfaceComponents;
#pragma endregion
#pragma region ReticleComponent
ArgusMap<uint16, ReticleComponent*, ArgusSetAllocator<1> > ArgusComponentRegistry::s_ReticleComponents;
#pragma endregion
#pragma region SpatialPartitioningComponent
ArgusMap<uint16, SpatialPartitioningComponent*, ArgusSetAllocator<1> > ArgusComponentRegistry::s_SpatialPartitioningComponents;
#pragma endregion
#pragma region TeamCommanderComponent
ArgusMap<uint16, TeamCommanderComponent*, ArgusSetAllocator<1> > ArgusComponentRegistry::s_TeamCommanderComponents;
#pragma endregion

void ArgusComponentRegistry::RemoveComponentsForEntity(uint16 entityId)
{
	if (UNLIKELY(entityId >= ArgusECSConstants::k_maxEntities))
	{
		ARGUS_LOG(ArgusECSLog, Error, TEXT("[%s] Invalid entity id %d."), ARGUS_FUNCNAME, entityId);
		return;
	}

	// Begin set bitset bits to false
	if (UNLIKELY(s_isAbilityComponentActive.Num() == 0))
	{
		s_isAbilityComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isAbilityComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isArgusDecalComponentActive.Num() == 0))
	{
		s_isArgusDecalComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isArgusDecalComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isAvoidanceGroupingComponentActive.Num() == 0))
	{
		s_isAvoidanceGroupingComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isAvoidanceGroupingComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isCarrierComponentActive.Num() == 0))
	{
		s_isCarrierComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isCarrierComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isCombatComponentActive.Num() == 0))
	{
		s_isCombatComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isCombatComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isConstructionComponentActive.Num() == 0))
	{
		s_isConstructionComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isConstructionComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isFlockingComponentActive.Num() == 0))
	{
		s_isFlockingComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isFlockingComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isFogOfWarLocationComponentActive.Num() == 0))
	{
		s_isFogOfWarLocationComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isFogOfWarLocationComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isHealthComponentActive.Num() == 0))
	{
		s_isHealthComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isHealthComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isIdentityComponentActive.Num() == 0))
	{
		s_isIdentityComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isIdentityComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isNavigationComponentActive.Num() == 0))
	{
		s_isNavigationComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isNavigationComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isNearbyEntitiesComponentActive.Num() == 0))
	{
		s_isNearbyEntitiesComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isNearbyEntitiesComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isNearbyObstaclesComponentActive.Num() == 0))
	{
		s_isNearbyObstaclesComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isNearbyObstaclesComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isObserversComponentActive.Num() == 0))
	{
		s_isObserversComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isObserversComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isPassengerComponentActive.Num() == 0))
	{
		s_isPassengerComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isPassengerComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isResourceComponentActive.Num() == 0))
	{
		s_isResourceComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isResourceComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isResourceExtractionComponentActive.Num() == 0))
	{
		s_isResourceExtractionComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isResourceExtractionComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isSpawningComponentActive.Num() == 0))
	{
		s_isSpawningComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isSpawningComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isTargetingComponentActive.Num() == 0))
	{
		s_isTargetingComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isTargetingComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isTaskComponentActive.Num() == 0))
	{
		s_isTaskComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isTaskComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isTimerComponentActive.Num() == 0))
	{
		s_isTimerComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isTimerComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isTransformComponentActive.Num() == 0))
	{
		s_isTransformComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isTransformComponentActive[entityId] = false;
	}
	if (UNLIKELY(s_isVelocityComponentActive.Num() == 0))
	{
		s_isVelocityComponentActive.SetNum(ArgusECSConstants::k_maxEntities, false);
	}
	else
	{
		s_isVelocityComponentActive[entityId] = false;
	}

	// Begin set component values
	s_AbilityComponents[entityId].Reset();
	s_ArgusDecalComponents[entityId].Reset();
	s_AvoidanceGroupingComponents[entityId].Reset();
	s_CarrierComponents[entityId].Reset();
	s_CombatComponents[entityId].Reset();
	s_ConstructionComponents[entityId].Reset();
	s_FlockingComponents[entityId].Reset();
	s_FogOfWarLocationComponents[entityId].Reset();
	s_HealthComponents[entityId].Reset();
	s_IdentityComponents[entityId].Reset();
	s_NavigationComponents[entityId].Reset();
	s_NearbyEntitiesComponents[entityId].Reset();
	s_NearbyObstaclesComponents[entityId].Reset();
	s_ObserversComponents[entityId].Reset();
	s_PassengerComponents[entityId].Reset();
	s_ResourceComponents[entityId].Reset();
	s_ResourceExtractionComponents[entityId].Reset();
	s_SpawningComponents[entityId].Reset();
	s_TargetingComponents[entityId].Reset();
	s_TaskComponents[entityId].Reset();
	s_TimerComponents[entityId].Reset();
	s_TransformComponents[entityId].Reset();
	s_VelocityComponents[entityId].Reset();

	// Begin remove dynamically allocated components
	if (s_AssetLoadingComponents.Contains(entityId))
	{
		s_AssetLoadingComponents.Remove(entityId);
	}
	if (s_FogOfWarComponents.Contains(entityId))
	{
		s_FogOfWarComponents.Remove(entityId);
	}
	if (s_InputInterfaceComponents.Contains(entityId))
	{
		s_InputInterfaceComponents.Remove(entityId);
	}
	if (s_ReticleComponents.Contains(entityId))
	{
		s_ReticleComponents.Remove(entityId);
	}
	if (s_SpatialPartitioningComponents.Contains(entityId))
	{
		s_SpatialPartitioningComponents.Remove(entityId);
	}
	if (s_TeamCommanderComponents.Contains(entityId))
	{
		s_TeamCommanderComponents.Remove(entityId);
	}
}

void ArgusComponentRegistry::FlushAllComponents()
{
	// Begin flush active component bitsets. Allocate component arrays if necessary.
	bool didAllocateAbilityComponents = false;
	if (!s_AbilityComponents)
	{
		didAllocateAbilityComponents = true;
		s_AbilityComponents = ArgusMemorySource::Reallocate<AbilityComponent>(s_AbilityComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isAbilityComponentActive.Reset();
	bool didAllocateArgusDecalComponents = false;
	if (!s_ArgusDecalComponents)
	{
		didAllocateArgusDecalComponents = true;
		s_ArgusDecalComponents = ArgusMemorySource::Reallocate<ArgusDecalComponent>(s_ArgusDecalComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isArgusDecalComponentActive.Reset();
	bool didAllocateAvoidanceGroupingComponents = false;
	if (!s_AvoidanceGroupingComponents)
	{
		didAllocateAvoidanceGroupingComponents = true;
		s_AvoidanceGroupingComponents = ArgusMemorySource::Reallocate<AvoidanceGroupingComponent>(s_AvoidanceGroupingComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isAvoidanceGroupingComponentActive.Reset();
	bool didAllocateCarrierComponents = false;
	if (!s_CarrierComponents)
	{
		didAllocateCarrierComponents = true;
		s_CarrierComponents = ArgusMemorySource::Reallocate<CarrierComponent>(s_CarrierComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isCarrierComponentActive.Reset();
	bool didAllocateCombatComponents = false;
	if (!s_CombatComponents)
	{
		didAllocateCombatComponents = true;
		s_CombatComponents = ArgusMemorySource::Reallocate<CombatComponent>(s_CombatComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isCombatComponentActive.Reset();
	bool didAllocateConstructionComponents = false;
	if (!s_ConstructionComponents)
	{
		didAllocateConstructionComponents = true;
		s_ConstructionComponents = ArgusMemorySource::Reallocate<ConstructionComponent>(s_ConstructionComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isConstructionComponentActive.Reset();
	bool didAllocateFlockingComponents = false;
	if (!s_FlockingComponents)
	{
		didAllocateFlockingComponents = true;
		s_FlockingComponents = ArgusMemorySource::Reallocate<FlockingComponent>(s_FlockingComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isFlockingComponentActive.Reset();
	bool didAllocateFogOfWarLocationComponents = false;
	if (!s_FogOfWarLocationComponents)
	{
		didAllocateFogOfWarLocationComponents = true;
		s_FogOfWarLocationComponents = ArgusMemorySource::Reallocate<FogOfWarLocationComponent>(s_FogOfWarLocationComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isFogOfWarLocationComponentActive.Reset();
	bool didAllocateHealthComponents = false;
	if (!s_HealthComponents)
	{
		didAllocateHealthComponents = true;
		s_HealthComponents = ArgusMemorySource::Reallocate<HealthComponent>(s_HealthComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isHealthComponentActive.Reset();
	bool didAllocateIdentityComponents = false;
	if (!s_IdentityComponents)
	{
		didAllocateIdentityComponents = true;
		s_IdentityComponents = ArgusMemorySource::Reallocate<IdentityComponent>(s_IdentityComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isIdentityComponentActive.Reset();
	bool didAllocateNavigationComponents = false;
	if (!s_NavigationComponents)
	{
		didAllocateNavigationComponents = true;
		s_NavigationComponents = ArgusMemorySource::Reallocate<NavigationComponent>(s_NavigationComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isNavigationComponentActive.Reset();
	bool didAllocateNearbyEntitiesComponents = false;
	if (!s_NearbyEntitiesComponents)
	{
		didAllocateNearbyEntitiesComponents = true;
		s_NearbyEntitiesComponents = ArgusMemorySource::Reallocate<NearbyEntitiesComponent>(s_NearbyEntitiesComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isNearbyEntitiesComponentActive.Reset();
	bool didAllocateNearbyObstaclesComponents = false;
	if (!s_NearbyObstaclesComponents)
	{
		didAllocateNearbyObstaclesComponents = true;
		s_NearbyObstaclesComponents = ArgusMemorySource::Reallocate<NearbyObstaclesComponent>(s_NearbyObstaclesComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isNearbyObstaclesComponentActive.Reset();
	bool didAllocateObserversComponents = false;
	if (!s_ObserversComponents)
	{
		didAllocateObserversComponents = true;
		s_ObserversComponents = ArgusMemorySource::Reallocate<ObserversComponent>(s_ObserversComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isObserversComponentActive.Reset();
	bool didAllocatePassengerComponents = false;
	if (!s_PassengerComponents)
	{
		didAllocatePassengerComponents = true;
		s_PassengerComponents = ArgusMemorySource::Reallocate<PassengerComponent>(s_PassengerComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isPassengerComponentActive.Reset();
	bool didAllocateResourceComponents = false;
	if (!s_ResourceComponents)
	{
		didAllocateResourceComponents = true;
		s_ResourceComponents = ArgusMemorySource::Reallocate<ResourceComponent>(s_ResourceComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isResourceComponentActive.Reset();
	bool didAllocateResourceExtractionComponents = false;
	if (!s_ResourceExtractionComponents)
	{
		didAllocateResourceExtractionComponents = true;
		s_ResourceExtractionComponents = ArgusMemorySource::Reallocate<ResourceExtractionComponent>(s_ResourceExtractionComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isResourceExtractionComponentActive.Reset();
	bool didAllocateSpawningComponents = false;
	if (!s_SpawningComponents)
	{
		didAllocateSpawningComponents = true;
		s_SpawningComponents = ArgusMemorySource::Reallocate<SpawningComponent>(s_SpawningComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isSpawningComponentActive.Reset();
	bool didAllocateTargetingComponents = false;
	if (!s_TargetingComponents)
	{
		didAllocateTargetingComponents = true;
		s_TargetingComponents = ArgusMemorySource::Reallocate<TargetingComponent>(s_TargetingComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isTargetingComponentActive.Reset();
	bool didAllocateTaskComponents = false;
	if (!s_TaskComponents)
	{
		didAllocateTaskComponents = true;
		s_TaskComponents = ArgusMemorySource::Reallocate<TaskComponent>(s_TaskComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isTaskComponentActive.Reset();
	bool didAllocateTimerComponents = false;
	if (!s_TimerComponents)
	{
		didAllocateTimerComponents = true;
		s_TimerComponents = ArgusMemorySource::Reallocate<TimerComponent>(s_TimerComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isTimerComponentActive.Reset();
	bool didAllocateTransformComponents = false;
	if (!s_TransformComponents)
	{
		didAllocateTransformComponents = true;
		s_TransformComponents = ArgusMemorySource::Reallocate<TransformComponent>(s_TransformComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isTransformComponentActive.Reset();
	bool didAllocateVelocityComponents = false;
	if (!s_VelocityComponents)
	{
		didAllocateVelocityComponents = true;
		s_VelocityComponents = ArgusMemorySource::Reallocate<VelocityComponent>(s_VelocityComponents, 0, ArgusECSConstants::k_maxEntities);
	}
	s_isVelocityComponentActive.Reset();

	// Begin flush component values or construct components.
	for (uint16 i = 0u; i < ArgusECSConstants::k_maxEntities; ++i)
	{
		if (didAllocateAbilityComponents)
		{
			new (&s_AbilityComponents[i]) AbilityComponent();
		}
		else
		{
			s_AbilityComponents[i].Reset();
		}
		if (didAllocateArgusDecalComponents)
		{
			new (&s_ArgusDecalComponents[i]) ArgusDecalComponent();
		}
		else
		{
			s_ArgusDecalComponents[i].Reset();
		}
		if (didAllocateAvoidanceGroupingComponents)
		{
			new (&s_AvoidanceGroupingComponents[i]) AvoidanceGroupingComponent();
		}
		else
		{
			s_AvoidanceGroupingComponents[i].Reset();
		}
		if (didAllocateCarrierComponents)
		{
			new (&s_CarrierComponents[i]) CarrierComponent();
		}
		else
		{
			s_CarrierComponents[i].Reset();
		}
		if (didAllocateCombatComponents)
		{
			new (&s_CombatComponents[i]) CombatComponent();
		}
		else
		{
			s_CombatComponents[i].Reset();
		}
		if (didAllocateConstructionComponents)
		{
			new (&s_ConstructionComponents[i]) ConstructionComponent();
		}
		else
		{
			s_ConstructionComponents[i].Reset();
		}
		if (didAllocateFlockingComponents)
		{
			new (&s_FlockingComponents[i]) FlockingComponent();
		}
		else
		{
			s_FlockingComponents[i].Reset();
		}
		if (didAllocateFogOfWarLocationComponents)
		{
			new (&s_FogOfWarLocationComponents[i]) FogOfWarLocationComponent();
		}
		else
		{
			s_FogOfWarLocationComponents[i].Reset();
		}
		if (didAllocateHealthComponents)
		{
			new (&s_HealthComponents[i]) HealthComponent();
		}
		else
		{
			s_HealthComponents[i].Reset();
		}
		if (didAllocateIdentityComponents)
		{
			new (&s_IdentityComponents[i]) IdentityComponent();
		}
		else
		{
			s_IdentityComponents[i].Reset();
		}
		if (didAllocateNavigationComponents)
		{
			new (&s_NavigationComponents[i]) NavigationComponent();
		}
		else
		{
			s_NavigationComponents[i].Reset();
		}
		if (didAllocateNearbyEntitiesComponents)
		{
			new (&s_NearbyEntitiesComponents[i]) NearbyEntitiesComponent();
		}
		else
		{
			s_NearbyEntitiesComponents[i].Reset();
		}
		if (didAllocateNearbyObstaclesComponents)
		{
			new (&s_NearbyObstaclesComponents[i]) NearbyObstaclesComponent();
		}
		else
		{
			s_NearbyObstaclesComponents[i].Reset();
		}
		if (didAllocateObserversComponents)
		{
			new (&s_ObserversComponents[i]) ObserversComponent();
		}
		else
		{
			s_ObserversComponents[i].Reset();
		}
		if (didAllocatePassengerComponents)
		{
			new (&s_PassengerComponents[i]) PassengerComponent();
		}
		else
		{
			s_PassengerComponents[i].Reset();
		}
		if (didAllocateResourceComponents)
		{
			new (&s_ResourceComponents[i]) ResourceComponent();
		}
		else
		{
			s_ResourceComponents[i].Reset();
		}
		if (didAllocateResourceExtractionComponents)
		{
			new (&s_ResourceExtractionComponents[i]) ResourceExtractionComponent();
		}
		else
		{
			s_ResourceExtractionComponents[i].Reset();
		}
		if (didAllocateSpawningComponents)
		{
			new (&s_SpawningComponents[i]) SpawningComponent();
		}
		else
		{
			s_SpawningComponents[i].Reset();
		}
		if (didAllocateTargetingComponents)
		{
			new (&s_TargetingComponents[i]) TargetingComponent();
		}
		else
		{
			s_TargetingComponents[i].Reset();
		}
		if (didAllocateTaskComponents)
		{
			new (&s_TaskComponents[i]) TaskComponent();
		}
		else
		{
			s_TaskComponents[i].Reset();
		}
		if (didAllocateTimerComponents)
		{
			new (&s_TimerComponents[i]) TimerComponent();
		}
		else
		{
			s_TimerComponents[i].Reset();
		}
		if (didAllocateTransformComponents)
		{
			new (&s_TransformComponents[i]) TransformComponent();
		}
		else
		{
			s_TransformComponents[i].Reset();
		}
		if (didAllocateVelocityComponents)
		{
			new (&s_VelocityComponents[i]) VelocityComponent();
		}
		else
		{
			s_VelocityComponents[i].Reset();
		}
	}

	// Begin flush dynamically allocated components
	s_AssetLoadingComponents.RemoveAll([](const uint16& entityId, AssetLoadingComponent*& component)
		{
			if (ArgusEntity::IsReservedEntityId(entityId) && component)
			{
				component->Reset();
				return false;
			}

			return true;
		}
	);
 
	s_FogOfWarComponents.RemoveAll([](const uint16& entityId, FogOfWarComponent*& component)
		{
			if (ArgusEntity::IsReservedEntityId(entityId) && component)
			{
				component->Reset();
				return false;
			}

			return true;
		}
	);
 
	s_InputInterfaceComponents.RemoveAll([](const uint16& entityId, InputInterfaceComponent*& component)
		{
			if (ArgusEntity::IsReservedEntityId(entityId) && component)
			{
				component->Reset();
				return false;
			}

			return true;
		}
	);
 
	s_ReticleComponents.RemoveAll([](const uint16& entityId, ReticleComponent*& component)
		{
			if (ArgusEntity::IsReservedEntityId(entityId) && component)
			{
				component->Reset();
				return false;
			}

			return true;
		}
	);
 
	s_SpatialPartitioningComponents.RemoveAll([](const uint16& entityId, SpatialPartitioningComponent*& component)
		{
			if (ArgusEntity::IsReservedEntityId(entityId) && component)
			{
				component->Reset();
				return false;
			}

			return true;
		}
	);
 
	s_TeamCommanderComponents.RemoveAll([](const uint16& entityId, TeamCommanderComponent*& component)
		{
			if (ArgusEntity::IsReservedEntityId(entityId) && component)
			{
				component->Reset();
				return false;
			}

			return true;
		}
	);
 
}

uint16 ArgusComponentRegistry::GetOwningEntityIdForComponentMember(const void* memberAddress)
{
	if (memberAddress >= &s_AbilityComponents[0] && memberAddress <= &s_AbilityComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const AbilityComponent* pretendComponent = reinterpret_cast<const AbilityComponent*>(memberAddress);
		return pretendComponent - &s_AbilityComponents[0];
	}
	if (memberAddress >= &s_ArgusDecalComponents[0] && memberAddress <= &s_ArgusDecalComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const ArgusDecalComponent* pretendComponent = reinterpret_cast<const ArgusDecalComponent*>(memberAddress);
		return pretendComponent - &s_ArgusDecalComponents[0];
	}
	if (memberAddress >= &s_AvoidanceGroupingComponents[0] && memberAddress <= &s_AvoidanceGroupingComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const AvoidanceGroupingComponent* pretendComponent = reinterpret_cast<const AvoidanceGroupingComponent*>(memberAddress);
		return pretendComponent - &s_AvoidanceGroupingComponents[0];
	}
	if (memberAddress >= &s_CarrierComponents[0] && memberAddress <= &s_CarrierComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const CarrierComponent* pretendComponent = reinterpret_cast<const CarrierComponent*>(memberAddress);
		return pretendComponent - &s_CarrierComponents[0];
	}
	if (memberAddress >= &s_CombatComponents[0] && memberAddress <= &s_CombatComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const CombatComponent* pretendComponent = reinterpret_cast<const CombatComponent*>(memberAddress);
		return pretendComponent - &s_CombatComponents[0];
	}
	if (memberAddress >= &s_ConstructionComponents[0] && memberAddress <= &s_ConstructionComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const ConstructionComponent* pretendComponent = reinterpret_cast<const ConstructionComponent*>(memberAddress);
		return pretendComponent - &s_ConstructionComponents[0];
	}
	if (memberAddress >= &s_FlockingComponents[0] && memberAddress <= &s_FlockingComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const FlockingComponent* pretendComponent = reinterpret_cast<const FlockingComponent*>(memberAddress);
		return pretendComponent - &s_FlockingComponents[0];
	}
	if (memberAddress >= &s_FogOfWarLocationComponents[0] && memberAddress <= &s_FogOfWarLocationComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const FogOfWarLocationComponent* pretendComponent = reinterpret_cast<const FogOfWarLocationComponent*>(memberAddress);
		return pretendComponent - &s_FogOfWarLocationComponents[0];
	}
	if (memberAddress >= &s_HealthComponents[0] && memberAddress <= &s_HealthComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const HealthComponent* pretendComponent = reinterpret_cast<const HealthComponent*>(memberAddress);
		return pretendComponent - &s_HealthComponents[0];
	}
	if (memberAddress >= &s_IdentityComponents[0] && memberAddress <= &s_IdentityComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const IdentityComponent* pretendComponent = reinterpret_cast<const IdentityComponent*>(memberAddress);
		return pretendComponent - &s_IdentityComponents[0];
	}
	if (memberAddress >= &s_NavigationComponents[0] && memberAddress <= &s_NavigationComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const NavigationComponent* pretendComponent = reinterpret_cast<const NavigationComponent*>(memberAddress);
		return pretendComponent - &s_NavigationComponents[0];
	}
	if (memberAddress >= &s_NearbyEntitiesComponents[0] && memberAddress <= &s_NearbyEntitiesComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const NearbyEntitiesComponent* pretendComponent = reinterpret_cast<const NearbyEntitiesComponent*>(memberAddress);
		return pretendComponent - &s_NearbyEntitiesComponents[0];
	}
	if (memberAddress >= &s_NearbyObstaclesComponents[0] && memberAddress <= &s_NearbyObstaclesComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const NearbyObstaclesComponent* pretendComponent = reinterpret_cast<const NearbyObstaclesComponent*>(memberAddress);
		return pretendComponent - &s_NearbyObstaclesComponents[0];
	}
	if (memberAddress >= &s_ObserversComponents[0] && memberAddress <= &s_ObserversComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const ObserversComponent* pretendComponent = reinterpret_cast<const ObserversComponent*>(memberAddress);
		return pretendComponent - &s_ObserversComponents[0];
	}
	if (memberAddress >= &s_PassengerComponents[0] && memberAddress <= &s_PassengerComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const PassengerComponent* pretendComponent = reinterpret_cast<const PassengerComponent*>(memberAddress);
		return pretendComponent - &s_PassengerComponents[0];
	}
	if (memberAddress >= &s_ResourceComponents[0] && memberAddress <= &s_ResourceComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const ResourceComponent* pretendComponent = reinterpret_cast<const ResourceComponent*>(memberAddress);
		return pretendComponent - &s_ResourceComponents[0];
	}
	if (memberAddress >= &s_ResourceExtractionComponents[0] && memberAddress <= &s_ResourceExtractionComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const ResourceExtractionComponent* pretendComponent = reinterpret_cast<const ResourceExtractionComponent*>(memberAddress);
		return pretendComponent - &s_ResourceExtractionComponents[0];
	}
	if (memberAddress >= &s_SpawningComponents[0] && memberAddress <= &s_SpawningComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const SpawningComponent* pretendComponent = reinterpret_cast<const SpawningComponent*>(memberAddress);
		return pretendComponent - &s_SpawningComponents[0];
	}
	if (memberAddress >= &s_TargetingComponents[0] && memberAddress <= &s_TargetingComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const TargetingComponent* pretendComponent = reinterpret_cast<const TargetingComponent*>(memberAddress);
		return pretendComponent - &s_TargetingComponents[0];
	}
	if (memberAddress >= &s_TaskComponents[0] && memberAddress <= &s_TaskComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const TaskComponent* pretendComponent = reinterpret_cast<const TaskComponent*>(memberAddress);
		return pretendComponent - &s_TaskComponents[0];
	}
	if (memberAddress >= &s_TimerComponents[0] && memberAddress <= &s_TimerComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const TimerComponent* pretendComponent = reinterpret_cast<const TimerComponent*>(memberAddress);
		return pretendComponent - &s_TimerComponents[0];
	}
	if (memberAddress >= &s_TransformComponents[0] && memberAddress <= &s_TransformComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const TransformComponent* pretendComponent = reinterpret_cast<const TransformComponent*>(memberAddress);
		return pretendComponent - &s_TransformComponents[0];
	}
	if (memberAddress >= &s_VelocityComponents[0] && memberAddress <= &s_VelocityComponents[ArgusECSConstants::k_maxEntities - 1])
	{
		const VelocityComponent* pretendComponent = reinterpret_cast<const VelocityComponent*>(memberAddress);
		return pretendComponent - &s_VelocityComponents[0];
	}

	return ArgusECSConstants::k_maxEntities;
}

#if !UE_BUILD_SHIPPING
void ArgusComponentRegistry::DrawComponentsDebug(uint16 entityId)
{
	if (const AbilityComponent* AbilityComponentPtr = GetComponent<AbilityComponent>(entityId))
	{
		AbilityComponentPtr->DrawComponentDebug();
	}
	if (const ArgusDecalComponent* ArgusDecalComponentPtr = GetComponent<ArgusDecalComponent>(entityId))
	{
		ArgusDecalComponentPtr->DrawComponentDebug();
	}
	if (const AvoidanceGroupingComponent* AvoidanceGroupingComponentPtr = GetComponent<AvoidanceGroupingComponent>(entityId))
	{
		AvoidanceGroupingComponentPtr->DrawComponentDebug();
	}
	if (const CarrierComponent* CarrierComponentPtr = GetComponent<CarrierComponent>(entityId))
	{
		CarrierComponentPtr->DrawComponentDebug();
	}
	if (const CombatComponent* CombatComponentPtr = GetComponent<CombatComponent>(entityId))
	{
		CombatComponentPtr->DrawComponentDebug();
	}
	if (const ConstructionComponent* ConstructionComponentPtr = GetComponent<ConstructionComponent>(entityId))
	{
		ConstructionComponentPtr->DrawComponentDebug();
	}
	if (const FlockingComponent* FlockingComponentPtr = GetComponent<FlockingComponent>(entityId))
	{
		FlockingComponentPtr->DrawComponentDebug();
	}
	if (const FogOfWarLocationComponent* FogOfWarLocationComponentPtr = GetComponent<FogOfWarLocationComponent>(entityId))
	{
		FogOfWarLocationComponentPtr->DrawComponentDebug();
	}
	if (const HealthComponent* HealthComponentPtr = GetComponent<HealthComponent>(entityId))
	{
		HealthComponentPtr->DrawComponentDebug();
	}
	if (const IdentityComponent* IdentityComponentPtr = GetComponent<IdentityComponent>(entityId))
	{
		IdentityComponentPtr->DrawComponentDebug();
	}
	if (const NavigationComponent* NavigationComponentPtr = GetComponent<NavigationComponent>(entityId))
	{
		NavigationComponentPtr->DrawComponentDebug();
	}
	if (const NearbyEntitiesComponent* NearbyEntitiesComponentPtr = GetComponent<NearbyEntitiesComponent>(entityId))
	{
		NearbyEntitiesComponentPtr->DrawComponentDebug();
	}
	if (const NearbyObstaclesComponent* NearbyObstaclesComponentPtr = GetComponent<NearbyObstaclesComponent>(entityId))
	{
		NearbyObstaclesComponentPtr->DrawComponentDebug();
	}
	if (const ObserversComponent* ObserversComponentPtr = GetComponent<ObserversComponent>(entityId))
	{
		ObserversComponentPtr->DrawComponentDebug();
	}
	if (const PassengerComponent* PassengerComponentPtr = GetComponent<PassengerComponent>(entityId))
	{
		PassengerComponentPtr->DrawComponentDebug();
	}
	if (const ResourceComponent* ResourceComponentPtr = GetComponent<ResourceComponent>(entityId))
	{
		ResourceComponentPtr->DrawComponentDebug();
	}
	if (const ResourceExtractionComponent* ResourceExtractionComponentPtr = GetComponent<ResourceExtractionComponent>(entityId))
	{
		ResourceExtractionComponentPtr->DrawComponentDebug();
	}
	if (const SpawningComponent* SpawningComponentPtr = GetComponent<SpawningComponent>(entityId))
	{
		SpawningComponentPtr->DrawComponentDebug();
	}
	if (const TargetingComponent* TargetingComponentPtr = GetComponent<TargetingComponent>(entityId))
	{
		TargetingComponentPtr->DrawComponentDebug();
	}
	if (const TaskComponent* TaskComponentPtr = GetComponent<TaskComponent>(entityId))
	{
		TaskComponentPtr->DrawComponentDebug();
	}
	if (const TimerComponent* TimerComponentPtr = GetComponent<TimerComponent>(entityId))
	{
		TimerComponentPtr->DrawComponentDebug();
	}
	if (const TransformComponent* TransformComponentPtr = GetComponent<TransformComponent>(entityId))
	{
		TransformComponentPtr->DrawComponentDebug();
	}
	if (const VelocityComponent* VelocityComponentPtr = GetComponent<VelocityComponent>(entityId))
	{
		VelocityComponentPtr->DrawComponentDebug();
	}
	if (const AssetLoadingComponent* AssetLoadingComponentPtr = GetComponent<AssetLoadingComponent>(entityId))
	{
		AssetLoadingComponentPtr->DrawComponentDebug();
	}
	if (const FogOfWarComponent* FogOfWarComponentPtr = GetComponent<FogOfWarComponent>(entityId))
	{
		FogOfWarComponentPtr->DrawComponentDebug();
	}
	if (const InputInterfaceComponent* InputInterfaceComponentPtr = GetComponent<InputInterfaceComponent>(entityId))
	{
		InputInterfaceComponentPtr->DrawComponentDebug();
	}
	if (const ReticleComponent* ReticleComponentPtr = GetComponent<ReticleComponent>(entityId))
	{
		ReticleComponentPtr->DrawComponentDebug();
	}
	if (const SpatialPartitioningComponent* SpatialPartitioningComponentPtr = GetComponent<SpatialPartitioningComponent>(entityId))
	{
		SpatialPartitioningComponentPtr->DrawComponentDebug();
	}
	if (const TeamCommanderComponent* TeamCommanderComponentPtr = GetComponent<TeamCommanderComponent>(entityId))
	{
		TeamCommanderComponentPtr->DrawComponentDebug();
	}
}
#endif //!UE_BUILD_SHIPPING
